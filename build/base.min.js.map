{"version":3,"sources":["../src/base.js"],"names":["base","global","onError","error","errorThrown","applyToAll","errorCallbacks","console","stack","errorDiv","document","getElementById","errorText","display","innerHTML","style","runSafely","func","external","simpleCallbackRegister","hooks","args","arguments","length","Array","apply","r","push","simpleCallbackUnregister","id","intervalHooks","splice","indexOf","addEventListener","element","event","callback","capture","ext","listenerHooks","removeEventListener","i","obj","customWindow","win","window","keys","Object","getOwnPropertyNames","key","value","log","bind","getPrototypeOf","setInterval","setInterval_","clearInterval","clearInterval_","requestAnimationFrame","requestAnimationFrame_","cancelAnimationFrame","cancelAnimationFrame_","setTimeout","setTimeout_","clearTimeout","clearTimeout_","registerModule","name","initFunc","module","scope","modules","registerCallbacks","importModule","Error","getAsset","asset","assets","data","makeAsset","url","type","xhr","loadText","incrLoading","ajax","join","basePath","request","responseText","decrLoading","loadTag","tag","createElement","head","appendChild","onload","onerror","src","loadAsset","loadAssets","loading","loaded","path","onready","onfail","warn","status","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","open","send","parts","l","concat","split","newParts","part","pop","startsWith","unshift","main","renderLoadingScreen","loadTickInterval","tickLoading","changeState","States","INDEX_NOT_LOADED","tryLoadIndex","APP_INITING","mainModule","init","APP_RUNNING","DISPLAY_ID","context","getContext","fillStyle","fillRect","width","height","textBaseline","font","strokeStyle","text","bigText","loadingState","ASSETS_LOADING","total","metric","measureText","strokeText","indexFunc","state","stateChangeCallbacks","funcs","arg","requestAnimationHooks","timeoutHooks","vendors","x","lenght","BASE_NOT_LOADED","BASE_NOT_RUN","getErrorCallbacks","getRegisterCallbacks","getBasePath","setBasePath","getAssets","getStates","getStateChangeCallbacks","getLoadingState","setLoadingState","this"],"mappings":"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","file":"base.min.js"}