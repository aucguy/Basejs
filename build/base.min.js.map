{"version":3,"sources":["../src/base.js"],"names":["base","global","onError","error","errorThrown","applyToAll","errorCallbacks","console","stack","errorDiv","document","getElementById","errorText","display","displayId","innerHTML","style","runSafely","func","self","args","apply","external","this","arguments","simpleCallbackRegister","hooks","length","Array","r","push","simpleCallbackUnregister","id","splice","indexOf","addEventListener","element","event","callback","capture","ext","listenerHooks","removeEventListener","i","obj","copyProperties","ret","keys","Object","getOwnPropertyNames","value","key","startsWith","WEBKIT","key2","slice","toLowerCase","bind","getPrototypeOf","customWindow","win","setInterval","setInterval_","clearInterval","clearInterval_","requestAnimationFrame","requestAnimationFrame_","cancelAnimationFrame","cancelAnimationFrame_","setTimeout","setTimeout_","clearTimeout","clearTimeout_","registerModule","name","initFunc","module","scope","modules","registerCallbacks","importModule","Error","getAsset","asset","assets","data","makeAsset","url","type","extra","xhr","loadText","incrLoading","ajax","join","basePath","request","JSON","parse","response","decrLoading","loadTag","tag","createElement","tagnames","head","appendChild","onload","onerror","src","loadAsset","hasWebAudio","loadAssets","loading","loaded","path","arraybuffer","onready","onfail","warn","status","window","XMLHttpRequest","ActiveXObject","responseType","onreadystatechange","readyState","open","send","parts","l","concat","split","newParts","part","pop","unshift","renderLoadingScreen","display_id","main","DISPLAY_ID","loadTickInterval","tickLoading","changeState","States","INDEX_NOT_LOADED","tryLoadIndex","APP_INITING","mainModule","init","APP_RUNNING","loadingState","indexFunc","ASSETS_LOADING","state","stateChangeCallbacks","funcs","arg","intervalHooks","requestAnimationHooks","timeoutHooks","vendors","x","lenght","image","spritesheet","text","json","tilemap","AudioContext","webkitAudioContext","BASE_NOT_LOADED","BASE_NOT_RUN","getErrorCallbacks","getRegisterCallbacks","getBasePath","setBasePath","getAssets","getStates","getStateChangeCallbacks","getLoadingState","setLoadingState"],"mappings":"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","file":"base.min.js"}