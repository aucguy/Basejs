{"version":3,"sources":["../src/base.js"],"names":["base","global","onError","error","errorThrown","applyToAll","errorCallbacks","console","stack","errorDiv","document","getElementById","errorText","display","innerHTML","style","runSafely","func","self","args","apply","external","this","arguments","simpleCallbackRegister","hooks","length","Array","r","push","simpleCallbackUnregister","id","intervalHooks","splice","indexOf","addEventListener","element","event","callback","capture","ext","listenerHooks","removeEventListener","i","obj","copyProperties","ret","keys","Object","getOwnPropertyNames","value","key","startsWith","WEBKIT","key2","slice","toLowerCase","bind","getPrototypeOf","customWindow","win","setInterval","setInterval_","clearInterval","clearInterval_","requestAnimationFrame","requestAnimationFrame_","cancelAnimationFrame","cancelAnimationFrame_","setTimeout","setTimeout_","clearTimeout","clearTimeout_","registerModule","name","initFunc","module","scope","modules","registerCallbacks","importModule","Error","getAsset","asset","assets","data","makeAsset","url","type","extra","xhr","loadText","incrLoading","ajax","join","basePath","request","responseText","decrLoading","loadTag","tag","createElement","tagnames","head","appendChild","onload","onerror","src","loadAsset","loadAssets","loading","loaded","path","onready","onfail","warn","status","window","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","open","send","parts","l","concat","split","newParts","part","pop","unshift","main","renderLoadingScreen","loadTickInterval","tickLoading","changeState","States","INDEX_NOT_LOADED","tryLoadIndex","APP_INITING","mainModule","init","APP_RUNNING","DISPLAY_ID","context","getContext","fillStyle","fillRect","width","height","textBaseline","font","strokeStyle","text","bigText","loadingState","ASSETS_LOADING","total","metric","measureText","strokeText","indexFunc","state","stateChangeCallbacks","funcs","arg","requestAnimationHooks","timeoutHooks","vendors","x","lenght","image","spritesheet","json","tilemap","BASE_NOT_LOADED","BASE_NOT_RUN","getErrorCallbacks","getRegisterCallbacks","getBasePath","setBasePath","getAssets","getStates","getStateChangeCallbacks","getLoadingState","setLoadingState"],"mappings":"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","file":"base.min.js"}