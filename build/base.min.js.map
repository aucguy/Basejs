{"version":3,"sources":["../src/base.js"],"names":["base","global","onError","error","errorThrown","applyToAll","errorCallbacks","console","stack","errorDiv","document","getElementById","errorText","display","innerHTML","style","runSafely","func","self","args","apply","external","this","arguments","simpleCallbackRegister","hooks","length","Array","r","push","simpleCallbackUnregister","id","splice","indexOf","addEventListener","element","event","callback","capture","ext","listenerHooks","removeEventListener","i","obj","copyProperties","ret","keys","Object","getOwnPropertyNames","value","key","startsWith","WEBKIT","key2","slice","toLowerCase","bind","getPrototypeOf","customWindow","win","setInterval","setInterval_","clearInterval","clearInterval_","requestAnimationFrame","requestAnimationFrame_","cancelAnimationFrame","cancelAnimationFrame_","setTimeout","setTimeout_","clearTimeout","clearTimeout_","registerModule","name","initFunc","module","scope","modules","registerCallbacks","importModule","Error","getAsset","asset","assets","data","makeAsset","url","type","extra","xhr","loadText","incrLoading","ajax","join","basePath","request","JSON","parse","response","decrLoading","loadTag","tag","createElement","tagnames","head","appendChild","onload","onerror","src","loadAsset","hasWebAudio","loadAssets","loading","loaded","path","arraybuffer","onready","onfail","warn","status","window","XMLHttpRequest","ActiveXObject","responseType","onreadystatechange","readyState","open","send","parts","l","concat","split","newParts","part","pop","unshift","main","renderLoadingScreen","DISPLAY_ID","loadTickInterval","tickLoading","changeState","States","INDEX_NOT_LOADED","tryLoadIndex","APP_INITING","mainModule","init","APP_RUNNING","loadingState","indexFunc","ASSETS_LOADING","state","stateChangeCallbacks","funcs","arg","intervalHooks","requestAnimationHooks","timeoutHooks","vendors","x","lenght","image","spritesheet","text","json","tilemap","AudioContext","webkitAudioContext","BASE_NOT_LOADED","BASE_NOT_RUN","getErrorCallbacks","getRegisterCallbacks","getBasePath","setBasePath","getAssets","getStates","getStateChangeCallbacks","getLoadingState","setLoadingState"],"mappings":";;;;;AAAA,GAAIA,MAAO,SAAUC,GAwCnB,QAASC,GAAQC,GACfC,EAAcD,EAEdE,EAAWC,eAAgBH,GAE3BI,QAAQJ,MAAMA,EAAMK,MAIpB,IAAIC,GAAWC,SAASC,eAAe,aACnCC,EAAYF,SAASC,eAAe,cACpCE,EAAUH,SAASC,eAAe,UAGnCC,KAAWA,EAAUE,UAAYX,EAAMK,OACvCC,IAAUA,EAASM,MAAMF,QAAU,SACnCA,IAASA,EAAQE,MAAMF,QAAU,QAQtC,QAASG,GAAUC,EAAMC,EAAMC,GAC7B,IAAIf,EACJ,IACEa,EAAKG,MAAMF,EAAMC,GACjB,MAAOhB,GACPD,EAAQC,IAYZ,QAASkB,GAASJ,GAChB,MAAO,YACLD,EAAUC,EAAMK,KAAMC,YAO1B,QAASC,GAAuBP,EAAMQ,GACpC,MAAO,YAEL,GAAIN,GAA4B,GAApBI,UAAUG,QAAeH,UAAU,IAC7CI,MAAMP,MAAM,KAAMG,UACpBJ,GAAK,GAAKnB,KAAKqB,SAASF,EAAK,GAC7B,IAAIS,GAAIX,EAAKG,MAAM,KAAMD,EAEzB,OADAM,GAAMI,KAAKD,GACJA,GAOX,QAASE,GAAyBb,EAAMQ,GACtC,MAAO,UAASM,GACdd,EAAKc,GACLN,EAAMO,OAAOP,EAAMQ,QAAQF,GAAK,IAoCpC,QAASG,GAAiBC,EAASC,EAAOC,EAAUC,GAClD,GAAIC,GAAMlB,EAASgB,EACnBF,GAAQD,iBAAiBE,EAAOG,EAAKD,GACrCE,EAAcX,MACZM,QAASA,EACTC,MAAOA,EACPG,IAAKA,EACLF,SAAUA,EACVC,QAASA,IASb,QAASG,GAAoBN,EAASC,EAAOC,GAC3C,IAAK,GAAIK,GAAI,EAAGA,EAAIF,EAAcd,OAAQgB,IAAK,CAC7C,GAAIC,GAAMH,EAAcE,EACxB,IAAIC,EAAIR,SAAWA,GAAWQ,EAAIP,OAASA,GACzCO,EAAIN,UAAYA,EAAU,CAC1BM,EAAIR,QAAQM,oBAAoBL,EAAOO,EAAIJ,KAC3CC,EAAcR,OAAOU,EAAG,EACxB,SAyCN,QAASE,GAAeD,GAItB,IAHA,GAAIzB,GAAOyB,EACPE,KAEEF,GAAK,CAET,IAAI,GADAG,GAAOC,OAAOC,oBAAoBL,GAC9BD,EAAE,EAAGA,EAAEI,EAAKpB,OAAQgB,IAAK,CAC/B,GACIO,GADAC,EAAMJ,EAAKJ,EAEf,IAAGQ,EAAIC,WAAWC,GAAS,CACzB,GAAIC,GAAOH,EAAII,MAAMF,EAAO1B,OAC5BuB,GAAQN,EAAIU,GACRJ,IACFI,EAAOA,EAAK,GAAGE,cAAgBF,EAAKC,MAAM,GAC1CL,EAAQN,EAAIU,GACRJ,IAAOA,EAAQN,EAAIO,SAGzBD,GAAQN,EAAIO,EAGK,mBAATD,GACRJ,EAAIK,GAAOD,EAAMO,KAAKtC,GAEtB2B,EAAIK,GAAOD,EAGfN,EAAMI,OAAOU,eAAed,GAE9B,MAAOE,GAMT,QAASa,KACP,GAAIC,GAAMf,EAAe3C,EAQzB,OANA0D,GAAIC,YAAcC,EAClBF,EAAIG,cAAgBC,EACpBJ,EAAIK,sBAAwBC,EAC5BN,EAAIO,qBAAuBC,EAC3BR,EAAIS,WAAaC,EACjBV,EAAIW,aAAeC,EACZZ,EA2CT,QAASa,GAAeC,EAAMC,GAC5B,GAAIC,IACFF,KAAMA,EACNG,MAAO,KACPF,SAAUA,EAEZG,GAAQJ,GAAQE,EAChBtE,EAAWyE,EAAmBH,GAQhC,QAASI,GAAaN,GACpB,GAAIE,GAASE,EAAQJ,EACrB,KAAKE,EAAQ,KAAM,IAAKK,OAAM,WAAaP,EAAO,mBAIlD,OAHKE,GAAOC,QACVD,EAAOC,MAAQD,EAAOD,YAEjBC,EAAOC,MA4ChB,QAASK,GAASC,GAChB,MAAOC,GAAOD,GAAOE,KAMvB,QAASC,GAAUtD,EAAIuD,EAAKC,EAAMH,EAAMI,EAAOC,GAC7C,OACEF,KAAMA,EACNxD,GAAIA,EACJuD,IAAKA,EACLF,KAAMA,EACNI,MAAOA,EAAQA,KACfC,IAAKA,EAAMA,EAAM,MAYrB,QAASC,GAAS3D,EAAIuD,EAAKC,EAAMC,GAC3BzD,IAAMoD,KACVQ,IACAC,EAAKC,EAAKC,EAAUR,GAAc,SAARC,EAAiB,SAASQ,GAClD,IACE,GAAIX,IAAQ,OAAQ,WAAWnD,QAAQsD,OAAcS,KAAKC,MAAMF,EAAQG,UAAYH,EAAQG,QAC5Ff,GAAOpD,GAAMsD,EAAUtD,EAAIuD,EAAKC,EAAMH,EAAMI,EAAOO,GACnDI,IACA,MAAOhG,GAEP,KADAgG,KACM,IAEP,SAASJ,GAEV,KADAI,KACM,GAAKnB,OAAM,4BAA8BjD,MAYnD,QAASqE,GAAQrE,EAAIuD,EAAKC,EAAMC,GAC9B,KAAIzD,IAAMoD,IAAV,CACAQ,GACA,IAAIU,GAAM3F,SAAS4F,cAAcC,EAAShB,IAASA,EACvC,WAARA,GACF7E,SAAS8F,KAAKC,YAAYJ,GAC1BA,EAAIK,OAASP,GAEbE,EAAIK,OAAS1G,KAAKqB,SAAS,WACzB8D,EAAOpD,GAAMsD,EAAUtD,EAAIuD,EAAKC,EAAMc,EAAKb,GAC3CW,MAGJE,EAAIM,QAAU3G,KAAKqB,SAAS,WAC1B,KAAM,IAAK2D,OAAM,yBAA2BjD,EAAK,SAAWuD,EAAM,OAEpEe,EAAIO,IAAMf,EAAKC,EAAUR,IAW3B,QAASuB,GAAU9E,EAAIuD,EAAKC,EAAMC,GACV,QAAlBe,EAAShB,IAA2B,SAARA,GAAmBuB,EACjDpB,EAAS3D,EAAIuD,EAAKC,EAAMC,GAExBY,EAAQrE,EAAIuD,EAAKC,EAAMC,GAU3B,QAASuB,GAAW5B,GAClB,IAAK,GAAIzC,GAAI,EAAGA,EAAIyC,EAAOzD,OAAQgB,IAAK,CACtC,GAAIwC,GAAQC,EAAOzC,EACnBmE,GAAU3B,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAIA,EAAM,KAOlD,QAASS,KACPqB,EAAUA,EAAU,EAAI,EAAIA,EAAU,EAMxC,QAASb,KACPa,IACAC,IAMF,QAASrB,GAAKsB,EAAMC,EAAaC,EAASC,GACnB,mBAAVA,KACTA,EAAS,SAAStB,GAChBxF,QAAQ+G,KAAK,UAAYJ,EAAO,qCAC9BnB,EAAQwB,SAOd,IAAIxB,GAAUyB,OAAOC,eAAiB,GAAIA,gBACtC,GAAIC,eAAc,oBACtB3B,GAAQ4B,aAAeR,EAAc,cAAgB,OACrDpB,EAAQ6B,mBAAqBvG,EAAS,WACV,GAAtB0E,EAAQ8B,aACY,KAAlB9B,EAAQwB,QAAoC,IAAnBxB,EAAQwB,OACnCH,EAAQrB,GAERsB,EAAOtB,MAIbA,EAAQ+B,KAAK,MAAOZ,GAAM,GAC1BnB,EAAQgC,OAOV,QAASlC,KAGP,IAAK,GADDmC,MACKtF,EAAI,EAAGuF,EAAI1G,UAAUG,OAAQgB,EAAIuF,EAAGvF,IAC3CsF,EAAQA,EAAME,OAAO3G,UAAUmB,GAAGyF,MAAM,KAG1C,IAAIC,KACJ,KAAK1F,EAAI,EAAGuF,EAAID,EAAMtG,OAAQgB,EAAIuF,EAAGvF,IAAK,CACxC,GAAI2F,GAAOL,EAAMtF,EAGZ2F,IAAiB,MAATA,IAGA,OAATA,EACFD,EAASE,MAGTF,EAASvG,KAAKwG,IAMlB,OAHIL,EAAM,GAAG7E,WAAW,MAAQ6E,EAAM,GAAG7E,WAAW,QAClDiF,EAASG,QAAQ,IAEZH,EAASvC,KAAK,OAASuC,EAAS1G,OAAS,IAAM,KAoCxD,QAAS8G,KACPC,GAAoBC,EAAY1B,EAASC,GACzC0B,GAAmB9E,EAAa+E,EAAa,KAC7CC,EAAYC,EAAOC,kBAOrB,QAASH,KACPI,IACAP,GAAoBC,EAAY1B,EAASC,GACzB,IAAZD,IACF6B,EAAYC,EAAOG,aACnBC,WAAanE,EAAa,QAC1BmE,WAAWC,OACXN,EAAYC,EAAOM,cAiBvB,QAASJ,KACJK,IAAgBP,EAAOC,kBAAkC,OAAdO,IAC5CA,IACAT,EAAYC,EAAOS,iBAUvB,QAASV,GAAYW,GACfA,GAASH,KACXA,GAAeG,EACfnJ,EAAWoJ,qBAAsBD,IAYrC,QAASnJ,GAAWqJ,EAAOC,GACzB,IAAK,GAAIjH,GAAI,EAAGA,EAAIgH,EAAMhI,OAAQgB,IAAKgH,EAAMhH,GAAGiH,GApnBlDrJ,iBAmLA,KAAK,GA9KDsJ,MAKApH,KAKAqH,KAKAC,KAKA1J,EAAc,KA6FdyD,EAAerC,EAAuBoC,YAAagG,GASlD7F,EAAiBjC,EAAyBgC,cAAe8F,GA0C1DG,GACF,KACA,MACA,SACA,KAGE/F,EAAwB/D,EAAO+D,sBAC/BE,EAAuBjE,EAAOiE,qBAEzB8F,EAAI,EAAGA,EAAID,EAAQrI,SAAWsC,EAAuBgG,IAC5DhG,EAAwB/D,EAAO8J,EAAQC,GAAK,yBAC5C9F,EAAuBjE,EAAO8J,EAAQC,GAAK,uBAM7C,IAAI/F,GAAyBzC,EAAuBwC,EAClD6F,GACE1F,EAAwBrC,EAAyBoC,EACnD2F,GAKExF,EAAc7C,EAAuB4C,WAAY0F,GACjDvF,EAAgBzC,EAAyBwC,aAAcwF,GAEvD1G,EAAS,QAuDb9C,gBAAeuB,KAAK,SAAS1B,GAC3B,GAAIuC,EACJ,KAAKA,EAAI,EAAGA,EAAIkH,EAAclI,OAAQgB,IACpCqB,EAAe6F,EAAclH,GAE/B,KAAKA,EAAI,EAAGA,EAAIF,EAAcd,OAAQgB,IAAK,CACzC,GAAIC,GAAMH,EAAcE,EACxBD,GAAoBE,EAAIR,QAASQ,EAAIP,MAAOO,EAAIN,UAElD,IAAKK,EAAI,EAAGA,EAAImH,EAAsBnI,OAAQgB,IAC5CyB,EAAsB0F,EAAsBnH,GAE9C,KAAIA,EAAI,EAAGA,EAAIoH,EAAaG,OAAQvH,IAClC4B,aAAawF,EAAapH,KAU9B,IAAImC,MAKAC,KAqCAK,KAIAW,EAAW,GAKXkB,KAKAC,EAAS,EAKTV,GACF2D,MAAS,MACTC,YAAe,MACfC,KAAQ,OACRC,KAAQ,OACRC,QAAW,QAGTxD,KAAiB7G,EAAOsK,eAAgBtK,EAAOuK,oBAK/ClB,GAAarJ,EAAOD,KAAOC,EAAOD,KAAKsJ,UAAY,OAAS,aAuL5DR,GACF2B,gBAAiB,EACjB1B,iBAAkB,EAClBQ,eAAgB,EAChBN,YAAa,EACbG,YAAa,GAMXV,EAAa,UAIbC,GAAmB,KAKnBU,GAAeP,EAAO4B,YAK1BjB,wBAEA,IAAIhB,KAAuBxI,EAAOD,KAAOC,EAAOD,KAAKyI,oBAAsB,OAAS,YA2EpF,OA9CAgB,sBAAqB5H,KAAK,SAAS2H,GAC9BA,GAASV,EAAOG,cACjBlF,EAAe4E,IACfF,QAaJgB,qBAAqB5H,KAAKmH,GA2B1B9G,EAAiBxB,SAAU,mBAAoB8H,GAAM,IAInDtI,QAASA,EACTc,UAAWA,EACXK,SAAUA,EACVuC,YAAaC,EACbC,cAAeC,EACf7B,iBAAkBA,EAClBO,oBAAqBA,EACrBuB,sBAAuBA,EACvBE,qBAAsBC,EACtBC,WAAYA,WACZE,aAAcA,aACdZ,aAAcA,EACdiH,kBAAmB,WACjB,MAAOrK,iBAETsK,qBAAsB,WACpB,MAAO9F,IAETN,eAAgBA,EAChBO,aAAcA,EACd8F,YAAa,WACX,MAAO/E,IAETgF,YAAa,SAASd,GACpBlE,EAAWkE,GAEblD,YAAa,WACX,MAAOA,IAET7B,SAAUA,EACV8F,UAAW,WACT,MAAO5F,IAETO,SAAUA,EACVU,QAASA,EACTS,UAAWA,EACXE,WAAYA,EACZZ,YAAaA,EACbsC,oBAAqBA,GACrBuC,UAAW,WACT,MAAOlC,IAETmC,wBAAyB,WACvB,MAAOxB,uBAETyB,gBAAiB,WACf,MAAO7B,KAET8B,gBAAiB,SAASnB,GACxBnB,EAAYmB,MAGf1I","file":"base.min.js"}