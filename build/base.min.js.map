{"version":3,"sources":["../src/base.js"],"names":["base","global","onError","error","errorThrown","applyToAll","errorCallbacks","console","stack","errorDiv","document","getElementById","errorText","display","innerHTML","style","runSafely","func","self","args","apply","external","this","arguments","simpleCallbackRegister","hooks","length","Array","r","push","simpleCallbackUnregister","id","intervalHooks","splice","indexOf","addEventListener","element","event","callback","capture","ext","listenerHooks","removeEventListener","i","obj","copyProperties","ret","keys","Object","getOwnPropertyNames","value","key","startsWith","WEBKIT","key2","slice","toLowerCase","bind","getPrototypeOf","customWindow","win","setInterval","setInterval_","clearInterval","clearInterval_","requestAnimationFrame","requestAnimationFrame_","cancelAnimationFrame","cancelAnimationFrame_","setTimeout","setTimeout_","clearTimeout","clearTimeout_","registerModule","name","initFunc","module","scope","modules","registerCallbacks","importModule","Error","getAsset","asset","assets","data","makeAsset","url","type","extra","xhr","loadText","incrLoading","ajax","join","basePath","request","response","decrLoading","loadTag","tag","createElement","tagnames","head","appendChild","onload","onerror","src","loadAsset","hasWebAudio","loadAssets","loading","loaded","path","arraybuffer","onready","onfail","warn","status","window","XMLHttpRequest","ActiveXObject","responseType","onreadystatechange","readyState","open","send","parts","l","concat","split","newParts","part","pop","unshift","main","renderLoadingScreen","loadTickInterval","tickLoading","changeState","States","INDEX_NOT_LOADED","tryLoadIndex","APP_INITING","mainModule","init","APP_RUNNING","DISPLAY_ID","context","getContext","fillStyle","fillRect","width","height","textBaseline","font","strokeStyle","text","bigText","loadingState","ASSETS_LOADING","total","metric","measureText","strokeText","indexFunc","state","stateChangeCallbacks","funcs","arg","requestAnimationHooks","timeoutHooks","vendors","x","lenght","image","spritesheet","json","tilemap","AudioContext","webkitAudioContext","BASE_NOT_LOADED","BASE_NOT_RUN","getErrorCallbacks","getRegisterCallbacks","getBasePath","setBasePath","getAssets","getStates","getStateChangeCallbacks","getLoadingState","setLoadingState"],"mappings":"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","file":"base.min.js"}